!function(r){"use strict";r.stringify=function t(r){function e(r){return/[^\w-.]/.test(r)?r.replace(/[^\w-.]/g,function(r){return"$"===r?"!":(r=r.charCodeAt(0),256>r?"*"+("00"+r.toString(16)).slice(-2):"**"+("0000"+r.toString(16)).slice(-4))}):r}switch(typeof r){case"number":return isFinite(r)?"~"+r:"~null";case"boolean":return"~"+r;case"string":return"~'"+e(r);case"object":return r?Array.isArray(r)?"~("+(r.map(function(r){return t(r)||"~null"}).join("")||"~")+")":"~("+Object.keys(r).map(function(n){var i=t(r[n]);return i&&e(n)+i}).filter(function(r){return r}).join("~")+")":"~null";default:return}};var e={"true":!0,"false":!1,"null":null};r.parse=function(r){function t(e){if(r[i]!==e)throw new Error("bad JSURL syntax: expected "+e+", got "+(r&&r[i]));i++}function n(){for(var e,t=i,n="";s>i&&"~"!==(e=r[i])&&")"!==e;)switch(e){case"*":i>t&&(n+=r.substring(t,i)),"*"===r[i+1]?(n+=String.fromCharCode(parseInt(r.substring(i+2,i+6),16)),t=i+=6):(n+=String.fromCharCode(parseInt(r.substring(i+1,i+3),16)),t=i+=3);break;case"!":i>t&&(n+=r.substring(t,i)),n+="$",t=++i;break;default:i++}return n+r.substring(t,i)}if(!r)return r;var i=0,s=r.length;return function u(){var a,o,f;switch(t("~"),o=r[i]){case"(":if(i++,"~"===r[i])if(a=[],")"===r[i+1])i++;else do a.push(u());while("~"===r[i]);else if(a={},")"!==r[i])do{var c=n();a[c]=u()}while("~"===r[i]&&++i);t(")");break;case"'":i++,a=n();break;default:for(f=i++;s>i&&/[^)~]/.test(r[i]);)i++;var l=r.substring(f,i);if(/[\d\-]/.test(o))a=parseFloat(l);else if(a=e[l],"undefined"==typeof a)throw new Error("bad value keyword: "+l)}return a}()}}("undefined"!=typeof exports?exports:window.JSURL=window.JSURL||{});